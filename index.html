<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>店長ジャンケン</title>
<style>
  :root{
    --bg:#8fd0e6;            /* 背景（いまの水色） */
    --ink:#0b2230;           /* 文字色 */
    --white:#fff;
    --accent:#ff8ea1;        /* 再挑戦ボタンなど */
    --card:#ffffffcc;
    --radius:16px;
    --maxw: min(92vw, 560px); /* スマホ基準の幅 */
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--ink);
    font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
  }
  .wrap{min-height:100svh; display:grid; place-items:start center; padding:20px 0 28px}
  .screen{width:100%; max-width:var(--maxw); padding:8px 14px 14px}
  h1{
    margin:0 0 12px; text-align:center; line-height:1.25;
    font-weight:900; font-size:clamp(20px, 7.8vw, 30px);
    letter-spacing:.02em; text-wrap:balance;
  }
  p.lead{
    margin:0 0 10px; text-align:center; opacity:.85; font-size:clamp(12px,3.6vw,14px)
  }

  /* ========== タイトル画面 ========== */
  #titleScreen .hero{
    display:grid; align-items:center; gap:10px 12px;
    grid-template-columns: 1.2fr .9fr;   /* 左：文 右：写真 */
  }
  #titleScreen .hero .copy{
    display:grid; gap:8px; align-content:center;
    padding:6px 0 6px 2px;
  }
  .tag{
    display:inline-block; font-weight:700; font-size:clamp(14px,4.6vw,18px);
    background:var(--card); padding:6px 10px; border-radius:999px;
  }
  .big{
    font-size:clamp(18px,6.3vw,28px); font-weight:900; line-height:1.25;
  }
  .hero img{
    width: 100%; max-width: 220px; justify-self:end; object-fit:contain;
  }
  .cta{
    margin-top:14px; display:grid; gap:10px;
    grid-template-columns: 1fr 1fr;
  }
  .btn{
    appearance:none; border:0; border-radius:12px; padding:12px 14px;
    font-weight:800; font-size:16px; cursor:pointer;
    background:var(--white); color:var(--ink); box-shadow:0 6px 16px #00000017;
  }
  .btn.primary{background:#2ad1ff; color:#003a4c}
  .btn.ghost{background:#fff0; outline:2px solid #005a71; color:#005a71}
  .note{margin-top:4px; text-align:center; font-size:12px; opacity:.8}

  /* スマホ幅では縦積み */
  @media (max-width:420px){
    #titleScreen .hero{grid-template-columns:1fr; text-align:center}
    .hero img{justify-self:center; max-width:240px}
  }

  /* ========== ゲーム画面 ========== */
  .topRow{
    display:grid; grid-template-columns: 1fr 1fr; align-items:start;
    margin: 6px 0 8px;
  }
  .bossArea{justify-self:end}
  .bossArea img{width: clamp(120px, 33vw, 180px); height:auto}
  .frameArea{
    justify-self:start; position:relative; width: clamp(90px, 26vw, 140px); aspect-ratio:3/4;
  }
  .frameArea img.frame{position:absolute; inset:0; width:100%; height:100%; object-fit:contain}
  .frameArea img.hand{position:absolute; inset:12% 12% 14%; width:76%; height:auto; object-fit:contain}

  .score{ text-align:center; font-size:clamp(18px,6.2vw,28px); font-weight:900; margin:8px 0 12px}
  .result{ text-align:center; font-size:clamp(14px,4.4vw,18px); margin:6px 0 10px; min-height:1.7em}

  .choices{
    display:flex; gap:14px; justify-content:center; flex-wrap:wrap; margin:8px 0 4px;
  }
  .choice{
    width:min(26vw,116px); aspect-ratio:1/1; border-radius:18px; background:var(--white);
    display:grid; place-items:center; font-size:clamp(26px,10vw,40px);
    box-shadow:0 10px 24px #00000018; cursor:pointer; user-select:none;
    transition:transform .06s ease;
  }
  .choice:active{transform:scale(.96)}
  .hidden{display:none !important}

  /* 合言葉カード */
  .keywordCard{
    display:grid; gap:8px; background:var(--card); border-radius:16px;
    padding:14px; margin: 10px auto 6px; width:min(92%, 420px);
    box-shadow:0 10px 26px #00000014;
  }
  .kwRow{display:flex; gap:10px; align-items:center; justify-content:space-between}
  .kw{font-weight:900; font-size:clamp(18px,5.6vw,22px)}
  .copyBtn{padding:8px 12px; border-radius:999px; border:0; background:#f0f3f6; font-weight:700; cursor:pointer}
  .againBtn{
    margin: 14px auto 0; display:block; background:var(--accent); color:#fff; font-weight:900;
    border:0; border-radius:12px; padding:12px 18px; box-shadow:0 10px 20px #00000020; cursor:pointer;
  }

  .footSpace{height:16svh} /* 余白（下がスカスカに見えない程度） */
</style>
</head>
<body>
<div class="wrap">

  <!-- ======= TITLE ======= -->
  <section id="titleScreen" class="screen">
    <div class="hero">
      <div class="copy">
        <span class="tag">めちゃつよ！</span>
        <div class="big">ボリューミー店長との<br/>じゃんけん対決！</div>
      </div>
      <img id="titleImg" src="title-start.png" alt="ボリューミー店長" />
    </div>

    <div class="cta">
      <button class="btn primary" onclick="goGame()">挑戦する</button>
      <button class="btn ghost" onclick="chickenOut()">あきらめる</button>
    </div>
    <p class="note">お店のQRからアクセス→勝利画面を見せると特典がもらえるよ！</p>
  </section>

  <!-- ======= GAME ======= -->
  <section id="gameScreen" class="screen hidden">
    <h1>〜店長とジャンケン勝負〜</h1>
    <p class="lead">先に3回勝った方が勝ち！</p>

    <div class="topRow">
      <!-- 左上：店長の手（枠つき） -->
      <div class="frameArea">
        <img class="frame" src="frame.png" alt="">
        <img id="bossHand" class="hand" src="rock.png" alt="店長の手">
      </div>
      <!-- 右上：店長 -->
      <div class="bossArea">
        <img src="boss.png" alt="ボリューミー店長">
      </div>
    </div>

    <div id="score" class="score">あなた 0 - 店長 0</div>
    <div id="result" class="result">勝負を選んでね！</div>

    <div id="choices" class="choices">
      <div class="choice" onclick="play('rock')"     aria-label="グー">✊</div>
      <div class="choice" onclick="play('scissors')" aria-label="チョキ">✌️</div>
      <div class="choice" onclick="play('paper')"    aria-label="パー">🖐️</div>
    </div>

    <!-- 勝敗時に出す合言葉カード -->
    <div id="kwCard" class="keywordCard hidden">
      <div class="kwRow">
        <div class="kw">合言葉：<span id="keyword">ボリューミー店長</span></div>
        <button class="copyBtn" onclick="copyKeyword()">コピー</button>
      </div>
      <div style="opacity:.8">LINEのトークでこの合言葉を送ってね</div>
    </div>

    <button id="again" class="againBtn hidden" onclick="resetGame()">再挑戦</button>
    <div class="footSpace"></div>
  </section>

</div>

<script>
/* ===== 画面切替（タイトル→ゲーム） ===== */
function goGame(){
  document.getElementById('titleScreen').classList.add('hidden');
  document.getElementById('gameScreen').classList.remove('hidden');
  window.scrollTo({top:0, behavior:'instant'});
}
function chickenOut(){
  const img = document.getElementById('titleImg');
  img.src = 'title-quit.png';
  img.alt = '俺の強さに怖気付いたかっ！';
  img.style.filter = 'saturate(1.1)';
}

/* ====== ジャンケン本体 ====== */
let player = 0, boss = 0;

const imgMap = {
  rock: 'rock.png',
  scissors: 'scissors.png',
  paper: 'paper.png'
};
const winMap = { rock: 'scissors', scissors: 'paper', paper: 'rock' };

function updateScore(){
  document.getElementById('score').textContent = `あなた ${player} - 店長 ${boss}`;
}

function cpuChoice(p){
  // 50%でプレイヤーに勝つ手、残り50%はランダム
  if (Math.random() < 0.5) {
    // CPUが勝つ手
    for (const [mine, oppo] of Object.entries(winMap)){
      if (oppo === p) return mine;
    }
  }
  const hands = Object.keys(winMap);
  return hands[Math.floor(Math.random()*3)];
}

function play(p){
  const c = cpuChoice(p);
  document.getElementById('bossHand').src = imgMap[c];

  if (p === c){
    document.getElementById('result').textContent = 'あいこ！';
  } else if (winMap[p] === c){
    player++;
    document.getElementById('result').textContent = 'あなたの勝ち！';
  } else {
    boss++;
    document.getElementById('result').textContent = '店長の勝ち！';
  }
  updateScore();
  checkEnd();
}

function checkEnd(){
  if (player >= 3 || boss >= 3){
    const won = player > boss;
    // 終了UI：手ボタン消す
    document.getElementById('choices').classList.add('hidden');
    document.getElementById('again').classList.remove('hidden');

    if (won){
      document.getElementById('result').textContent = '🎉 あなたの勝ち！';
      document.getElementById('kwCard').classList.remove('hidden');
    } else {
      document.getElementById('result').textContent = '店長の勝ち！ ゲーム終了！';
      document.getElementById('kwCard').classList.add('hidden');
    }
  }
}

function resetGame(){
  player = 0; boss = 0;
  updateScore();
  document.getElementById('result').textContent = '勝負を選んでね！';
  document.getElementById('choices').classList.remove('hidden');
  document.getElementById('again').classList.add('hidden');
  document.getElementById('kwCard').classList.add('hidden');
  document.getElementById('bossHand').src = imgMap['rock'];
  window.scrollTo({top:0, behavior:'smooth'});
}

function copyKeyword(){
  const text = document.getElementById('keyword').textContent;
  navigator.clipboard?.writeText(text);
  const btn = document.querySelector('.copyBtn');
  const old = btn.textContent;
  btn.textContent = 'コピー済み';
  setTimeout(()=> btn.textContent = old, 1400);
}

// 初期表示
updateScore();
</script>
</body>
</html>
