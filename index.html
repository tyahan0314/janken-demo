<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>åº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ï¼</title>
  <style>
    /* ===== ãƒ™ãƒ¼ã‚¹ ===== */
    :root{
      --space-top: calc(env(safe-area-inset-top) + 8px);
      --radius: 12px;
      /* å·¦å³ç”»åƒã‚’ä¸­å¤®å¯„ã‚Šã«ã™ã‚‹é‡ï¼ˆå¤§ãã„ã»ã©å†…å´ï¼‰ */
      --side-gap: clamp(24px, 10vw, 88px);
    }
    body{
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
      text-align:center; background:#87CEEB; margin:0; padding:0;
    }
    h1{ margin: clamp(8px,2.6vw,16px) 0 0; font-size: clamp(18px,6vw,28px); }
    .top-note{ margin:4px 0 0; font-size:clamp(12px,3.8vw,16px); opacity:.9; }

    /* ===== å³ä¸Šï¼šåº—é•· ===== */
    #boss{
      position:fixed; top:var(--space-top); right:var(--side-gap);
      width:clamp(72px,18vw,120px); z-index:5;
      user-select:none; -webkit-user-drag:none;
    }
    /* ===== å·¦ä¸Šï¼šåº—é•·ã®æ‰‹ï¼ˆæ ï¼‰ ===== */
    #frame{
      position:fixed; top:var(--space-top); left:var(--side-gap);
      width:clamp(84px,22vw,140px); height:clamp(84px,22vw,140px);
      background:url('frame.png') no-repeat center/contain;
      display:flex; align-items:center; justify-content:center; z-index:4;
      user-select:none;
    }
    #cpuHand{ width:70%; height:auto; display:none; -webkit-user-drag:none; }

    /* ===== ä¸­å¤®ã‚¨ãƒªã‚¢ ===== */
    #gameArea{
      /* ä¸Šã®å›ºå®šç”»åƒã¨è¢«ã‚‰ãªã„ç¨‹åº¦ã«ã€å…¨ä½“ã®ä½™ç™½ã¯ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
      margin-top: clamp(96px,24vw,170px);
      min-height:auto;
      padding: 0 12px clamp(16px,3vh,24px);
      display:flex; flex-direction:column; align-items:center; gap:clamp(6px,2.2vw,12px);
    }
    #score{ font-size:clamp(16px,4.8vw,22px); font-weight:700; }
    #result{ font-size:clamp(14px,4.5vw,20px); line-height:1.5; min-height:1.5em; }

    /* æ‰‹ãƒœã‚¿ãƒ³ */
    #choices{ display:flex; gap:clamp(10px,4vw,16px); }
    #choices button{
      font-size:clamp(24px,8.5vw,38px);
      padding:clamp(8px,2.8vw,12px) clamp(10px,3.6vw,16px);
      border:none; border-radius:var(--radius);
      background:#fff; box-shadow:0 2px 0 rgba(0,0,0,.12);
      cursor:pointer; transition:transform .06s;
    }
    #choices button:active{ transform:translateY(1px); }

    /* åˆè¨€è‘‰ï¼†å†æŒ‘æˆ¦ */
    #keywordBox{
      display:none; margin-top:clamp(8px,2.8vw,12px);
      padding:clamp(10px,3vw,14px) clamp(14px,4.5vw,18px);
      background:#fff; border-radius:var(--radius);
      font-size:clamp(14px,4.2vw,18px);
      box-shadow:0 2px 0 rgba(0,0,0,.08);
      max-width:min(92vw,520px);
    }
    #keywordBox .kw-note{ margin-top:6px; font-size:.9em; opacity:.85; }
    #copyKw{ margin-left:8px; padding:6px 10px; font-size:.95em; border:none; border-radius:8px; background:#efefef; cursor:pointer; }

    #retry{
      display:none; margin:clamp(10px,3vw,16px) auto 0;
      padding:clamp(10px,3vw,14px) clamp(16px,4.5vw,22px);
      font-size:clamp(14px,4.5vw,18px);
      background:#ff7f7f; color:#fff; border:none; border-radius:var(--radius); cursor:pointer;
    }

    @media (min-width:640px){
      #gameArea{ max-width:520px; margin-left:auto; margin-right:auto; }
    }
  </style>
</head>
<body>
  <h1>ã€œåº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ã€œ</h1>
  <p class="top-note">å…ˆã«3å›å‹ã£ãŸæ–¹ãŒå‹ã¡ï¼</p>

  <img id="boss" src="boss.png" alt="åº—é•·">
  <div id="frame"><img id="cpuHand" alt="åº—é•·ã®æ‰‹"></div>

  <div id="gameArea">
    <div id="score">ã‚ãªãŸ 0 - åº—é•· 0</div>
    <div id="result"></div>

    <div id="choices">
      <button onclick="play('rock')">âœŠ</button>
      <button onclick="play('scissors')">âœŒï¸</button>
      <button onclick="play('paper')">ğŸ–ï¸</button>
    </div>

    <div id="keywordBox">
      åˆè¨€è‘‰ï¼š<strong id="keywordText">ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·</strong>
      <button id="copyKw" onclick="copyKeyword()">ã‚³ãƒ”ãƒ¼</button>
      <div class="kw-note">LINEã®ãƒˆãƒ¼ã‚¯ã§ã“ã®åˆè¨€è‘‰ã‚’é€ã£ã¦ã­</div>
    </div>

    <button id="retry" onclick="resetGame()">å†æŒ‘æˆ¦</button>
  </div>

  <script>
    /* åº—é•·ã®å¼·ã•ï¼ˆå‹ã¡æ‰‹ã‚’å‡ºã™ç¢ºç‡ï¼‰ â€” æ•°å­—ã‚’ä¸Šã’ã‚‹ã»ã©å¼·ããªã‚‹ */
    const BOSS_SMART_RATE = 0.8; // 0.6ã€œ0.9 ã§èª¿æ•´æ¨å¥¨
    const KEYWORD = 'ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·';

    let playerScore = 0, bossScore = 0, gameOver = false;

    function cpuChoice(player){
      const counter = (h)=> (h==='rock'?'paper': h==='scissors'?'rock':'scissors');
      const rnd = ()=> ['rock','scissors','paper'][Math.floor(Math.random()*3)];
      return Math.random() < BOSS_SMART_RATE ? counter(player) : rnd();
    }

    function play(playerHand){
      if (gameOver) return;

      const bossHand = cpuChoice(playerHand);
      const cpuImg = document.getElementById('cpuHand');
      cpuImg.src = bossHand + '.png';
      cpuImg.style.display = 'block';

      let msg;
      const win = (playerHand==='rock'&&bossHand==='scissors')||
                  (playerHand==='scissors'&&bossHand==='paper')||
                  (playerHand==='paper'&&bossHand==='rock');
      if (win){ playerScore++; msg='ã‚ãªãŸã®å‹ã¡ï¼'; }
      else if (playerHand===bossHand){ msg='ã‚ã„ã“ï¼'; }
      else { bossScore++; msg='åº—é•·ã®å‹ã¡ï¼'; }

      document.getElementById('result').textContent = msg;
      document.getElementById('score').textContent = `ã‚ãªãŸ ${playerScore} - åº—é•· ${bossScore}`;

      if (playerScore===3) endGame(true);
      if (bossScore===3) endGame(false);
    }

    function endGame(playerWon){
      gameOver = true;
      document.getElementById('choices').style.display = 'none';
      document.getElementById('retry').style.display = 'block';

      const kwBox = document.getElementById('keywordBox');
      if (playerWon){
        document.getElementById('result').textContent = 'ğŸ‰ ã‚ãªãŸã®å‹ã¡ï¼';
        document.getElementById('keywordText').textContent = KEYWORD;
        kwBox.style.display = 'inline-block';
      }else{
        document.getElementById('result').textContent = 'åº—é•·ã®å‹ã¡ï¼ ã‚²ãƒ¼ãƒ çµ‚äº†ï¼';
        kwBox.style.display = 'none';
      }
    }

    function resetGame(){
      gameOver = false; playerScore = 0; bossScore = 0;
      document.getElementById('score').textContent = 'ã‚ãªãŸ 0 - åº—é•· 0';
      document.getElementById('result').textContent = '';
      document.getElementById('cpuHand').style.display = 'none';
      document.getElementById('retry').style.display = 'none';
      document.getElementById('keywordBox').style.display = 'none';
      document.getElementById('choices').style.display = 'flex';
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function copyKeyword(){
      const btn = document.getElementById('copyKw');
      navigator.clipboard?.writeText(KEYWORD).then(()=>{
        const t = btn.textContent; btn.textContent='ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
        setTimeout(()=> btn.textContent=t, 1200);
      });
    }
  </script>
</body>
</html>
