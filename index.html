<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·ã‚¸ãƒ£ãƒ³ã‚±ãƒ³</title>
<style>
  :root{
    --bg:#8ecfe0;            /* èƒŒæ™¯ */
    --panel:#ffffff;
    --ink:#10212b;
    --accent:#10b6e7;
    --accent-2:#ff8698;
  }

  /* ãƒ™ãƒ¼ã‚¹ */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg);
    font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
    color:var(--ink);
    display:flex; align-items:stretch; justify-content:center;
  }
  main{width:100%; max-width:960px; margin:auto; padding:16px 16px 80px}
  h1{
    font-size:clamp(22px, 5.6vw, 40px);
    line-height:1.2;
    margin:6px 0 12px;
    writing-mode:horizontal-tb; /* ç¸¦æ›¸ãé˜²æ­¢ */
  }
  p, .hint {font-size:clamp(12px, 3.6vw, 16px); margin:0; opacity:.9}

  /* ã‚¿ã‚¤ãƒˆãƒ«å…±é€š */
  .badge{
    display:inline-block; padding:.6em 1.2em; border-radius:999px;
    background:#e6f7fd; color:#24343c; font-weight:700;
    margin:6px auto 10px;
  }
  .hero{
    display:grid; gap:18px; place-items:center;
    grid-template-rows:auto auto 1fr auto;
  }
  .hero-img{
    width:min(72vw, 440px); height:auto; object-fit:contain;
    display:block; margin:8px auto 0;
    /* ã¡ã‚‡ã£ã¨å¤§ãã‚ã«è¦‹ã›ã‚‹ */
    transform:translateY(6px);
  }
  .cta-row{
    display:flex; gap:14px; justify-content:center; margin-top:8px;
  }
  .btn{
    appearance:none; border:none; cursor:pointer;
    padding:.95em 1.6em; border-radius:14px; font-weight:800;
    font-size:clamp(15px, 4.5vw, 18px);
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    transition:.15s transform ease, .15s filter ease;
    white-space:nowrap;
  }
  .btn:active{transform:translateY(1px); filter:brightness(.98)}
  .btn-primary{background:var(--accent); color:#fff}
  .btn-ghost{background:transparent; color:#0d2c36; border:3px solid #0d2c36; padding:.85em 1.4em}

  /* ã‚¿ã‚¤ãƒˆãƒ«ã ã‘ã®è£œåŠ©ãƒ†ã‚­ã‚¹ãƒˆ */
  .title-note{ text-align:center; margin-top:12px; opacity:.9 }

  /* ã‚²ãƒ¼ãƒ ç”»é¢ */
  .top-row{
    display:flex; align-items:flex-start; justify-content:space-between; gap:18px;
    margin-top:2px; margin-bottom:6px;
  }
  .boss{
    height:clamp(120px, 28vw, 240px);
    width:auto; object-fit:contain;
  }
  .frame-slot{
    position:relative;
    width:clamp(84px, 22vw, 180px); height:clamp(120px, 30vw, 240px);
    flex:0 0 auto;
  }
  .frame-slot img{position:absolute; inset:0; width:100%; height:100%; object-fit:contain}
  .hand-emoji{
    position:absolute; inset:0; display:grid; place-items:center;
    font-size:clamp(42px, 10vw, 80px);
  }

  .score{text-align:center; font-weight:900; font-size:clamp(20px, 6vw, 32px); margin:10px 0}
  .round{ text-align:center; font-size:clamp(14px,4.2vw,18px); margin:6px 0 14px }

  .choices{
    display:flex; justify-content:center; gap:16px; flex-wrap:nowrap;
    margin-top:4px;
  }
  .choice{
    width:clamp(84px, 22vw, 140px); height:clamp(70px, 18vw, 110px);
    background:#fff; border-radius:18px; display:grid; place-items:center;
    font-size:clamp(30px, 8vw, 48px); cursor:pointer; user-select:none;
    box-shadow:0 12px 30px rgba(0,0,0,.10);
    transition:transform .12s ease, box-shadow .12s ease;
  }
  .choice:active{ transform:translateY(1px); box-shadow:0 8px 18px rgba(0,0,0,.12) }

  /* çµæœã‚«ãƒ¼ãƒ‰ */
  .result-card{
    display:none; max-width:680px; margin:14px auto 0; padding:14px 16px;
    background:#fff; border-radius:14px; text-align:center;
    box-shadow:0 10px 24px rgba(0,0,0,.10);
  }
  .keyword{
    font-weight:900; font-size:clamp(18px,5vw,22px);
    background:#f2f7ff; padding:.35em .6em; border-radius:10px; display:inline-block;
    margin:6px 8px 8px;
  }
  .copy{ margin-left:8px; padding:.35em .8em; border-radius:10px; background:#eef; border:0; cursor:pointer }

  .center{ text-align:center; }
  .mt-12{ margin-top:12px }
  .mt-16{ margin-top:16px }
  .mt-24{ margin-top:24px }

  /* ã¡ã‚‡ã„ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¾®èª¿æ•´ */
  @media (min-width:680px){
    .top-row{ gap:24px }
    .score{ margin-top:8px }
  }
</style>
</head>
<body>
<main>

  <!-- ===== ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ ===== -->
  <section id="title" class="hero" aria-label="ã‚¿ã‚¤ãƒˆãƒ«">
    <div class="badge" id="titleBadge">ã‚ã¡ã‚ƒã¤ã‚ˆã£ï¼</div>
    <h1 class="center">ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·ã¨ã®<br>ã˜ã‚ƒã‚“ã‘ã‚“å¯¾æ±ºï¼</h1>
    <img id="titleImg" class="hero-img" src="title-start.png" alt="åº—é•·ï¼ˆæŒ‘ç™ºãƒãƒ¼ã‚ºï¼‰">
    <div class="cta-row">
      <button class="btn btn-primary" id="startBtn">æŒ‘æˆ¦ã™ã‚‹</button>
      <!-- è¦‹ãŸç›®ã¯åŒã˜ã€æŠ¼ã™ã¨â€œã‚ãã‚‰ã‚ã‚‹â€æ¼”å‡º -->
      <button class="btn btn-ghost" id="altStartBtn">æŒ‘æˆ¦ã™ã‚‹</button>
    </div>
    <div class="title-note">ãŠåº—ã®QRã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ â†’ å‹åˆ©ç”»é¢ã‚’è¦‹ã›ã‚‹ã¨ç‰¹å…¸ãŒã‚‚ã‚‰ãˆã‚‹ã‚ˆï¼</div>
  </section>

  <!-- ===== ã‚²ãƒ¼ãƒ ç”»é¢ ===== -->
  <section id="game" hidden aria-label="ã‚¸ãƒ£ãƒ³ã‚±ãƒ³">
    <div class="top-row">
      <div class="frame-slot">
        <img src="frame.png" alt="" aria-hidden="true">
        <div id="bossHand" class="hand-emoji">âœŠ</div>
      </div>
      <img class="boss" src="boss.png" alt="åº—é•·">
    </div>

    <h1 class="center">ã€œåº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ã€œ</h1>
    <p class="center">å…ˆã«3å›å‹ã£ãŸæ–¹ãŒå‹ã¡ï¼</p>

    <div id="score" class="score center">ã‚ãªãŸ 0 - åº—é•· 0</div>
    <div id="roundMsg" class="round center">å‹è² ã‚’é¸ã‚“ã§ã­ï¼</div>

    <div id="choices" class="choices" role="group" aria-label="æ‰‹ã‚’é¸ã¶">
      <div class="choice" data-hand="rock" aria-label="ã‚°ãƒ¼">âœŠ</div>
      <div class="choice" data-hand="scissors" aria-label="ãƒãƒ§ã‚­">âœŒï¸</div>
      <div class="choice" data-hand="paper" aria-label="ãƒ‘ãƒ¼">ğŸ–ï¸</div>
    </div>

    <!-- å‹åˆ©æ™‚ -->
    <div id="winCard" class="result-card">
      <div class="center">ğŸ‰ <b>ã‚ãªãŸã®å‹ã¡ï¼</b></div>
      <div class="mt-12">
        åˆè¨€è‘‰ï¼š<span class="keyword" id="kwText">ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·</span>
        <button class="copy" id="copyKw">ã‚³ãƒ”ãƒ¼</button>
      </div>
      <div class="hint mt-12">LINEã®ãƒˆãƒ¼ã‚¯ã§ã“ã®åˆè¨€è‘‰ã‚’é€ã£ã¦ã­</div>
    </div>

    <!-- æ•—åŒ—æ™‚ -->
    <div id="loseCard" class="result-card">
      <div class="center">ğŸ‘‘ <b>åº—é•·ã®å‹ã¡ï¼</b> ã‚²ãƒ¼ãƒ çµ‚äº†ï¼</div>
    </div>

    <div class="center mt-16">
      <button id="retryBtn" class="btn btn-ghost" hidden>å†æŒ‘æˆ¦</button>
    </div>
  </section>

</main>

<script>
  // ===== ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ãƒ­ã‚¸ãƒƒã‚¯ =====
  const title = document.getElementById('title');
  const game  = document.getElementById('game');
  const titleImg   = document.getElementById('titleImg');
  const titleBadge = document.getElementById('titleBadge');
  const startBtn   = document.getElementById('startBtn');
  const altStart   = document.getElementById('altStartBtn');

  function goGame(){
    title.hidden = true;
    game.hidden  = false;
    resetGame();
  }
  startBtn.addEventListener('click', goGame);

  // ãƒ€ãƒŸãƒ¼ã€ŒæŒ‘æˆ¦ã™ã‚‹ã€= ã‚ãã‚‰ã‚ã‚‹æ¼”å‡º
  altStart.addEventListener('click', ()=>{
    titleImg.src = 'title-quit.png';
    titleImg.alt = 'åº—é•·ï¼ˆãƒ‰ãƒ¤é¡”ï¼‰';
    titleBadge.textContent = 'ä¿ºã®å¼·ã•ã«æ€–æ°—ã¥ã„ãŸã‹ã£ï¼';
    // 1.2ç§’å¾Œã«æœ¬å½“ã«ã‚²ãƒ¼ãƒ é–‹å§‹
    setTimeout(goGame, 1200);
  });

  // ===== ã‚¸ãƒ£ãƒ³ã‚±ãƒ³æœ¬ä½“ =====
  const scoreEl = document.getElementById('score');
  const roundMsg = document.getElementById('roundMsg');
  const bossHand = document.getElementById('bossHand');

  const choicesWrap = document.getElementById('choices');
  const winCard  = document.getElementById('winCard');
  const loseCard = document.getElementById('loseCard');
  const retryBtn = document.getElementById('retryBtn');
  const copyKw   = document.getElementById('copyKw');

  let playerScore = 0, cpuScore = 0;
  const EMOJI = { rock:'âœŠ', scissors:'âœŒï¸', paper:'ğŸ–ï¸' };

  function updateScore(){
    scoreEl.textContent = `ã‚ãªãŸ ${playerScore} - åº—é•· ${cpuScore}`;
  }

  function cpuChoice(player){
    // 50%ã¯ãƒ©ãƒ³ãƒ€ãƒ 
    if (Math.random() < 0.5) {
      return ['rock','scissors','paper'][Math.floor(Math.random()*3)];
    }
    // 50%ã¯ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å‹ã¤æ‰‹
    if (player === 'rock')     return 'paper';
    if (player === 'paper')    return 'scissors';
    /* scissors ã®æ™‚ */        return 'rock';
  }

  function judge(player, cpu){
    if (player === cpu) return 'draw';
    if (
      (player==='rock'     && cpu==='scissors') ||
      (player==='scissors' && cpu==='paper')    ||
      (player==='paper'    && cpu==='rock')
    ) return 'win';
    return 'lose';
  }

  function endGame(who){
    choicesWrap.style.display = 'none';
    retryBtn.hidden = false;
    if (who === 'player'){
      winCard.style.display = 'block';
      loseCard.style.display = 'none';
      roundMsg.textContent = 'ğŸ‰ ã‚ãªãŸã®å‹ã¡ï¼ãŠã‚ã§ã¨ã†ï¼';
    } else {
      winCard.style.display = 'none';
      loseCard.style.display = 'block';
      roundMsg.textContent = 'ğŸ‘‘ åº—é•·ã®å‹ã¡ï¼ã¾ãŸæŒ‘æˆ¦ã—ã¦ã­ï¼';
    }
  }

  function resetGame(){
    playerScore = 0; cpuScore = 0;
    updateScore();
    bossHand.textContent = EMOJI.rock;
    roundMsg.textContent = 'å‹è² ã‚’é¸ã‚“ã§ã­ï¼';
    winCard.style.display = 'none';
    loseCard.style.display = 'none';
    retryBtn.hidden = true;
    choicesWrap.style.display = 'flex';
  }

  choicesWrap.addEventListener('click', (e)=>{
    const card = e.target.closest('.choice');
    if(!card) return;
    const player = card.dataset.hand;
    const cpu = cpuChoice(player);

    // åº—é•·ã®æ‰‹ã‚’è¡¨ç¤ºï¼ˆæ ã®ä¸­ï¼‰
    bossHand.textContent = EMOJI[cpu];

    const r = judge(player, cpu);
    if (r === 'win'){
      playerScore++;
      roundMsg.textContent = 'ã‚ãªãŸã®å‹ã¡ï¼ æ¬¡ã®æ‰‹ã‚’é¸ã‚“ã§ã­';
    } else if (r === 'lose'){
      cpuScore++;
      roundMsg.textContent = 'åº—é•·ã®å‹ã¡ï¼ æ¬¡ã®æ‰‹ã‚’é¸ã‚“ã§ã­';
    } else {
      roundMsg.textContent = 'ã‚ã„ã“ï¼ ã‚‚ã†ä¸€å›ï¼';
    }
    updateScore();

    if (playerScore >= 3) endGame('player');
    if (cpuScore    >= 3) endGame('cpu');
  });

  retryBtn.addEventListener('click', resetGame);

  copyKw.addEventListener('click', async ()=>{
    const text = 'ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·';
    try{
      await navigator.clipboard.writeText(text);
      copyKw.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
      setTimeout(()=>copyKw.textContent='ã‚³ãƒ”ãƒ¼', 1200);
    }catch(e){
      alert('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸâ€¦ã€Œãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·ã€ã‚’æ‰‹å…¥åŠ›ã§é€ã£ã¦ã­ã€‚');
    }
  });
</script>
</body>
</html>
