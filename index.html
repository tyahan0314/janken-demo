<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>åº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ï¼</title>
<style>
  :root{
    /* ãƒ’ãƒ¼ãƒ­ãƒ¼é ˜åŸŸï¼ˆä¸Šéƒ¨ï¼‰ã®ã‚µã‚¤ã‚ºæ„Ÿï¼šã‚¹ãƒãƒ›åŸºæº–ã§å¤§ãã‚ï¼‹å¯å¤‰ */
    --hero-h:    clamp(150px, 32vh, 280px);
    --boss-w:    clamp(120px, 32vw, 220px);
    --frame-w:   clamp(120px, 30vw, 210px);
    --hero-gap:  clamp(24px, 7vw, 48px);   /* 2äººã®é–“ã®è·é›¢ */
    --pad-x:     clamp(12px, 4vw, 20px);
    --pad-y:     clamp(12px, 3vh, 20px);

    --accent: #ff7f9a;
    --bg: #8ed0e6;
    --card: #ffffff;
    --ink: #1e293b;
    --ink-weak:#334155;
    --shadow: 0 8px 22px rgba(0,0,0,.12);
    --round: 14px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
    color:var(--ink);
    background:var(--bg);
  }
  #app{
    min-height:100vh;
    padding: var(--pad-y) var(--pad-x) calc(var(--pad-y)*2.2);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap: clamp(8px, 1.8vh, 16px);
  }

  /* ã“ã“ãŒæ–°ï¼šä¸Šéƒ¨ãƒ’ãƒ¼ãƒ­ãƒ¼è¡Œï¼ˆå·¦å³ã®ç”»åƒã‚’ä¸­å¤®å¯„ã‚Šï¼†å¤§ãã‚ï¼‰ */
  .hero{
    width:100%;
    height:var(--hero-h);
    display:flex;
    align-items:flex-end;
    justify-content:center;
    column-gap: var(--hero-gap);
    position:relative;
    margin-top: clamp(4px, 0.8vh, 10px);
  }
  .hero .cpuBox{
    width:var(--frame-w);
    aspect-ratio: 3/4;
    position:relative;
  }
  .hero .cpuBox img.frame{
    position:absolute; inset:0;
    width:100%; height:100%; object-fit:contain;
    user-select:none; -webkit-user-drag:none;
  }
  .hero .cpuBox img.hand{
    position:absolute; inset:0;
    width:70%; height:70%; object-fit:contain;
    margin:auto;
    display:block;
    user-select:none; -webkit-user-drag:none;
  }
  .hero img.boss{
    width:var(--boss-w);
    height:auto;
    object-fit:contain;
    user-select:none; -webkit-user-drag:none;
  }

  h1{
    margin: 0;
    font-size: clamp(22px, 5.8vw, 34px);
    letter-spacing: .04em;
    text-align:center;
    line-height:1.25;
  }
  .sub{
    margin: 0;
    font-size: clamp(12px, 3.4vw, 16px);
    color: var(--ink-weak);
    text-align:center;
  }

  #score{
    margin-top: clamp(4px, 1vh, 10px);
    font-size: clamp(20px, 6vw, 28px);
    font-weight: 800;
    text-align:center;
  }

  /* æ‰‹ãƒœã‚¿ãƒ³ */
  .handRow{
    display:flex; gap: clamp(14px, 4.2vw, 22px);
    margin-top: clamp(10px, 2.4vh, 16px);
  }
  .handBtn{
    width: clamp(90px, 26vw, 140px);
    height: clamp(68px, 18vw, 100px);
    border: 0;
    border-radius: var(--round);
    background: var(--card);
    box-shadow: var(--shadow);
    font-size: clamp(30px, 9vw, 40px);
    display:flex; align-items:center; justify-content:center;
  }
  .handBtn:active{ transform: translateY(1px) }

  /* çµæœè¡¨ç¤ºï¼†åˆè¨€è‘‰ã‚«ãƒ¼ãƒ‰ */
  #result{ 
    margin-top: clamp(8px, 1.8vh, 14px);
    font-size: clamp(16px, 4.4vw, 20px);
    text-align:center;
  }
  .keywordCard{
    display:none;
    margin-top: clamp(8px, 1.8vh, 14px);
    background: var(--card);
    color: var(--ink);
    border-radius: var(--round);
    box-shadow: var(--shadow);
    padding: clamp(12px, 3.4vw, 18px);
    width: min(92%, 560px);
  }
  .kwTop{ display:flex; justify-content:space-between; align-items:center; gap:12px }
  .kwWord{ font-weight:800; font-size: clamp(16px, 5vw, 22px) }
  .copyBtn{
    padding: 8px 14px;
    border-radius: 12px;
    border: 0;
    background: #e6eef7;
    color: #0f172a;
    font-weight: 700;
  }
  .kwHint{ margin-top:8px; color:var(--ink-weak); font-size: clamp(12px, 3.6vw, 14px) }

  /* å†æŒ‘æˆ¦ */
  #retry{
    display:none;
    margin: clamp(12px, 2.8vh, 18px) auto 0;
    padding: 12px 24px;
    font-weight:800;
    border-radius: 999px;
    border:0;
    color:white;
    background: var(--accent);
    box-shadow: var(--shadow);
  }

  /* ä¸‹ã®ä½™ç™½ã‚’è©°ã‚ã‚‹ãŸã‚ã€æœ€å¾Œã«å°‘ã—ã ã‘ä½™ç™½ */
  .spacer{ height: clamp(12px, 2vh, 20px) }
</style>
</head>
<body>
  <main id="app">

    <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼šä¸­å¤®å¯„ã‚Šã§å¤§ãã -->
    <section class="hero">
      <div class="cpuBox" aria-label="åº—é•·ã®æ‰‹">
        <img class="frame" src="frame.png" alt="">
        <img id="cpuHand" class="hand" src="" alt="åº—é•·ã®æ‰‹">
      </div>
      <img class="boss" src="boss.png" alt="åº—é•·">
    </section>

    <h1>ã€œåº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ã€œ</h1>
    <p class="sub">å…ˆã«3å›å‹ã£ãŸæ–¹ãŒå‹ã¡ï¼</p>

    <div id="score">ã‚ãªãŸ 0 - åº—é•· 0</div>

    <div class="handRow" id="handRow">
      <button class="handBtn" data-hand="rock"     aria-label="ã‚°ãƒ¼">âœŠ</button>
      <button class="handBtn" data-hand="scissors" aria-label="ãƒãƒ§ã‚­">âœŒï¸</button>
      <button class="handBtn" data-hand="paper"    aria-label="ãƒ‘ãƒ¼">ğŸ–ï¸</button>
    </div>

    <div id="result" aria-live="polite"></div>

    <div class="keywordCard" id="kw">
      <div class="kwTop">
        <div class="kwWord">åˆè¨€è‘‰ï¼š<b>ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·</b></div>
        <button class="copyBtn" id="copy">ã‚³ãƒ”ãƒ¼</button>
      </div>
      <div class="kwHint">LINEã®ãƒˆãƒ¼ã‚¯ã§ã“ã®åˆè¨€è‘‰ã‚’é€ã£ã¦ã­</div>
    </div>

    <button id="retry">å†æŒ‘æˆ¦</button>
    <div class="spacer"></div>
  </main>

<script>
  // ============== ç”»åƒãƒãƒƒãƒ— ==============
  const imgMap = {
    rock: 'rock.png',
    scissors: 'scissors.png',
    paper: 'paper.png'
  };
  function handToImg(h){ return imgMap[h]; }

  // ============== è¦ç´ å‚ç…§ ==============
  const cpuImg   = document.getElementById('cpuHand');
  const scoreEl  = document.getElementById('score');
  const resultEl = document.getElementById('result');
  const rowEl    = document.getElementById('handRow');
  const retryBtn = document.getElementById('retry');
  const kwCard   = document.getElementById('kw');
  const copyBtn  = document.getElementById('copy');

  let player = 0, cpu = 0, finished = false;

  // é–‹å§‹æ™‚ã«åº—é•·ã®æ‰‹ã‚’è¦‹ã›ã‚‹ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ï¼‰
  (function showInit(){
    const pool = ['rock','scissors','paper'];
    const init = pool[Math.floor(Math.random()*pool.length)];
    cpuImg.src = handToImg(init);
  })();

  // 50%ã§ãƒ©ãƒ³ãƒ€ãƒ ã€50%ã§å‹ã¡æ‰‹ã‚’å‡ºã™ãƒ­ã‚¸ãƒƒã‚¯
  function cpuChoice(playerHand){
    if(Math.random() < 0.5){
      const r = ['rock','scissors','paper'][Math.floor(Math.random()*3)];
      return r;
    }else{
      if(playerHand==='rock')     return 'paper';
      if(playerHand==='scissors') return 'rock';
      return 'scissors'; // player===paper
    }
  }

  function updateScore(){
    scoreEl.textContent = `ã‚ãªãŸ ${player} - åº—é•· ${cpu}`;
  }

  function endGame(win){
    finished = true;
    // ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
    [...rowEl.querySelectorAll('button')].forEach(b=>b.disabled=true);
    retryBtn.style.display = 'inline-block';
    if(win){
      resultEl.textContent = 'ğŸ‰ ã‚ãªãŸã®å‹ã¡ï¼';
      kwCard.style.display = 'block';
    }else{
      resultEl.textContent = 'åº—é•·ã®å‹ã¡ï¼';
      kwCard.style.display = 'none';
    }
  }

  // æ‰‹ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯
  rowEl.addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-hand]');
    if(!btn || finished) return;

    const p = btn.dataset.hand;
    const c = cpuChoice(p);
    cpuImg.src = handToImg(c);

    // å‹æ•—åˆ¤å®š
    let msg = '';
    if(p===c){
      msg = 'å¼•ãåˆ†ã‘ï¼';
    }else if(
      (p==='rock'     && c==='scissors') ||
      (p==='scissors' && c==='paper')    ||
      (p==='paper'    && c==='rock')
    ){
      player++;
      msg = 'ã‚ãªãŸã®å‹ã¡ï¼';
    }else{
      cpu++;
      msg = 'åº—é•·ã®å‹ã¡ï¼';
    }
    resultEl.textContent = msg;
    updateScore();

    if(player>=3) endGame(true);
    else if(cpu>=3) endGame(false);
  });

  retryBtn.addEventListener('click', ()=>{
    player=cpu=0; finished=false;
    updateScore();
    resultEl.textContent = '';
    kwCard.style.display = 'none';
    retryBtn.style.display = 'none';
    // ãƒœã‚¿ãƒ³å¾©æ´»
    [...rowEl.querySelectorAll('button')].forEach(b=>b.disabled=false);
    // åˆæœŸæ‰‹ã‚‚æ›´æ–°ã—ã¦å°‘ã—æ¼”å‡º
    const pool = ['rock','scissors','paper'];
    cpuImg.src = handToImg(pool[Math.floor(Math.random()*3)]);
  });

  // åˆè¨€è‘‰ã‚³ãƒ”ãƒ¼
  copyBtn.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText('ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·');
      copyBtn.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
      setTimeout(()=>copyBtn.textContent='ã‚³ãƒ”ãƒ¼', 1200);
    }catch(e){
      alert('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ');
    }
  });
</script>
</body>
</html>
