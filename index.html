<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·ã‚¸ãƒ£ãƒ³ã‚±ãƒ³</title>
<style>
  :root{
    --bg:#97d2e3;
    --ink:#0c2233;
    --ink-weak:#2b4a5a;
    --card:#fff;
    --accent:#0ea5e9;
    --accent-ink:#fff;
    --btn-shadow: 0 8px 24px rgba(0,0,0,.12);
    --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:var(--bg);color:var(--ink);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, Hiragino Kaku Gothic ProN, Meiryo, sans-serif;
    -webkit-font-smoothing:antialiased
  }
  .container{max-width:960px;margin-inline:auto;padding:min(3svh,24px) clamp(16px,6vw,28px)}
  h1{
    margin:0 0 8px;font-size:clamp(22px,6.2vw,40px);line-height:1.2;font-weight:900;letter-spacing:.02em;
    text-align:center
  }
  p.lead{margin:0 0 20px;text-align:center;color:var(--ink-weak);font-size:clamp(13px,3.6vw,16px)}
  .chip{
    display:inline-block;margin:0 auto 10px;padding:10px 20px;border-radius:999px;
    background:#e6f7fe;color:#134a63;font-weight:700;font-size:clamp(12px,3.8vw,16px)
  }
  button{font:inherit}
  .btn{
    display:inline-flex;align-items:center;justify-content:center;gap:.5em;
    min-width: min(48svw, 280px); padding:14px 20px;border-radius:999px;border:2px solid transparent;
    box-shadow:var(--btn-shadow);cursor:pointer;user-select:none;touch-action:manipulation
  }
  .btn.primary{background:var(--accent);color:var(--accent-ink)}
  .btn.outline{background:transparent;border-color:#0f3c4b;color:#0f3c4b}
  .btn:active{transform:translateY(1px)}
  .btn-row{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin-top:22px}
  .caption{margin-top:14px;text-align:center;color:var(--ink-weak);font-size:clamp(12px,3.6vw,15px)}
  .hero{
    display:flex;justify-content:center;margin:clamp(8px,2svh,16px) 0 clamp(6px,1.5svh,12px);
  }
  /* é€éPNGã®ä½™ç™½ã«å¼•ã£å¼µã‚‰ã‚Œãªã„ã‚ˆã†å¤§ãã‚ã« */
  .hero img{
    max-height:min(52svh,76vw);
    max-width:min(82vw,560px);
    height:auto;width:auto;object-fit:contain;object-position:center bottom;
  }

  /* ç”»é¢åˆ‡æ›¿ */
  .screen{display:none}
  .screen.active{display:block}

  /* ===== Game ===== */
  .topline{
    display:flex;align-items:flex-start;justify-content:space-between;gap:16px;
    margin-bottom:clamp(8px,1.8svh,16px)
  }
  /* å·¦ï¼šæ ï¼‹åº—é•·ã®æ‰‹ï¼ˆçµµæ–‡å­—ï¼‰ */
  .frameWrap{
    display:grid;place-items:center;
    width:min(44vw,260px);aspect-ratio:6/8;position:relative;
  }
  .frameWrap img.frame{
    position:absolute;inset:0;width:100%;height:100%;object-fit:contain;pointer-events:none
  }
  .frameWrap .handEmoji{
    font-size:clamp(44px,10vw,84px);filter:drop-shadow(0 6px 16px rgba(0,0,0,.15))
  }
  /* å³ï¼šåº—é•· */
  #boss{
    max-width:min(40vw,260px);
    max-height:min(32svh,280px);
    height:auto;width:auto;object-fit:contain;object-position:center;filter:drop-shadow(0 8px 24px rgba(0,0,0,.12))
  }

  .score{
    text-align:center;margin:10px 0 6px;
    font-size:clamp(20px,6vw,34px);font-weight:900;letter-spacing:.02em
  }
  .hint{ text-align:center;color:var(--ink-weak);font-size:clamp(13px,3.8vw,16px);margin-bottom:12px}

  /* æ‰‹ãƒœã‚¿ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰ */
  .hands{ display:flex;justify-content:center;gap:16px;flex-wrap:wrap;margin:18px 0 8px}
  .hand{
    width:min(28vw,160px);aspect-ratio:1/1;border-radius:20px;border:none;background:var(--card);
    box-shadow:var(--btn-shadow);cursor:pointer
  }
  .hand span{font-size:clamp(36px,10vw,56px)}
  .hand:active{transform:translateY(1px)}

  /* çµ‚äº†å¾Œã®ã‚«ãƒ¼ãƒ‰ & å†æŒ‘æˆ¦ */
  .resultCard{
    display:none;max-width:720px;margin:14px auto 0;background:var(--card);border-radius:16px;
    padding:14px 16px;box-shadow:var(--btn-shadow);text-align:center
  }
  .resultCard strong{font-size:clamp(14px,4.2vw,18px)}
  .utils{ display:flex;justify-content:center;gap:12px;margin-top:12px;flex-wrap:wrap}
  .pill{padding:8px 14px;border-radius:999px;border:1px solid #c8d8df;background:#f3fbff;color:#0f3c4b}

  .restartRow{display:none;justify-content:center;margin:18px 0 24px}
  .restart{padding:14px 28px;border-radius:999px;border:2px solid #083645;background:transparent;color:#083645}

  @media (max-width:390px){
    .hero img{max-height:48svh}
    #boss{max-width:46vw}
    .frameWrap{width:min(48vw,240px)}
  }
</style>
</head>
<body>

<!-- ===== Title screen ===== -->
<section id="title" class="screen active">
  <div class="container">
    <div class="chip" id="titleChip">ã‚ã¡ã‚ƒã¤ã‚ˆã£ï¼</div>
    <h1>ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·ã¨ã®<br>ã˜ã‚ƒã‚“ã‘ã‚“å¯¾æ±ºï¼</h1>
    <div class="hero"><img id="titleImg" src="./title-start2.png" alt="åº—é•·ï¼ˆãƒ‘ãƒ¼ã§æŒ‘ç™ºï¼‰"></div>
    <div class="btn-row" id="titleBtns">
      <button class="btn primary" id="start1">æŒ‘æˆ¦ã™ã‚‹</button>
      <button class="btn outline" id="start2">ã‚ãã‚‰ã‚ã‚‹</button>
    </div>
    <p class="caption">å‹åˆ©ã™ã‚‹ã¨ç‰¹å…¸ãŒã‚‚ã‚‰ãˆã‚‹ã‚ˆï¼</p>
  </div>
</section>

<!-- ===== Game screen ===== -->
<section id="game" class="screen">
  <div class="container">
    <h1>ã€œåº—é•·ã¨ã‚¸ãƒ£ãƒ³ã‚±ãƒ³å‹è² ã€œ</h1>
    <p class="lead">å…ˆã«3å›å‹ã£ãŸæ–¹ãŒå‹ã¡ï¼</p>

    <div class="topline">
      <div class="frameWrap">
        <img src="./frame2.png" class="frame" alt="">
        <div id="bossHand" class="handEmoji">âœŠ</div>
      </div>
      <img id="boss" src="./boss2.png" alt="åº—é•·">
    </div>

    <div id="score" class="score">ã‚ãªãŸ 0 - åº—é•· 0</div>
    <div id="hint" class="hint">å‹è² ã‚’é¸ã‚“ã§ã­ï¼</div>

    <div id="hands" class="hands" role="group" aria-label="ã˜ã‚ƒã‚“ã‘ã‚“ã‚’é¸ã¶">
      <button class="hand" data-hand="rock"     aria-label="ã‚°ãƒ¼"><span>âœŠ</span></button>
      <button class="hand" data-hand="scissors" aria-label="ãƒãƒ§ã‚­"><span>âœŒï¸</span></button>
      <button class="hand" data-hand="paper"    aria-label="ãƒ‘ãƒ¼"><span>ğŸ–ï¸</span></button>
    </div>

    <!-- å‹åˆ©æ™‚ã®åˆè¨€è‘‰ã‚«ãƒ¼ãƒ‰ / å¤±æ•—æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <div id="resultCard" class="resultCard" aria-live="polite"></div>

    <div id="restartRow" class="restartRow">
      <button class="restart" id="restartBtn">å†æŒ‘æˆ¦</button>
    </div>
  </div>
</section>

<script>
  // ç”»é¢åˆ‡æ›¿
  const $ = s=>document.querySelector(s);
  const show = id => {
    document.querySelectorAll('.screen').forEach(v=>v.classList.remove('active'));
    $(id).classList.add('active');
    window.scrollTo({top:0,behavior:'smooth'});
  };

  // Title: â€œã‚ãã‚‰ã‚ã‚‹â€ã‚’æŠ¼ã—ãŸã‚‰æŒ‘ç™ºãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆ‡æ›¿ï¼ˆãƒœã‚¿ãƒ³2ã¤ã¨ã‚‚æŒ‘æˆ¦ï¼‰
  $('#start1').addEventListener('click', ()=>startGame());
  $('#start2').addEventListener('click', ()=>{
    $('#titleChip').textContent = 'ä¿ºã®å¼·ã•ã«æ€–æ°—ã¥ã„ãŸã‹ã£ï¼';
    $('#titleImg').src = './title-quit2.png';
    const btns = $('#titleBtns');
    btns.innerHTML = `
      <button class="btn primary" id="goA">æŒ‘æˆ¦ã™ã‚‹</button>
      <button class="btn outline"  id="goB">æŒ‘æˆ¦ã™ã‚‹</button>`;
    $('#goA').addEventListener('click', startGame);
    $('#goB').addEventListener('click', startGame);
  });

  // ===== Game logic =====
  const score = { you:0, boss:0 };
  const bossHandEl = $('#bossHand');
  const handsEl = $('#hands');
  const scoreEl = $('#score');
  const hintEl  = $('#hint');
  const resultCard = $('#resultCard');
  const restartRow = $('#restartRow');

  function startGame(){
    score.you = 0; score.boss = 0;
    updateScore();
    hintEl.textContent = 'å‹è² ã‚’é¸ã‚“ã§ã­ï¼';
    bossHandEl.textContent = 'âœŠ';
    resultCard.style.display = 'none';
    restartRow.style.display = 'none';
    handsEl.style.display = 'flex';
    show('#game');
  }

  const winMap = { rock:'scissors', scissors:'paper', paper:'rock' };
  const emojiMap = { rock:'âœŠ', scissors:'âœŒï¸', paper:'ğŸ–ï¸' };

  // åº—é•·ã¯ 50% ã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å‹ã¤æ‰‹ã‚’å‡ºã™
  function bossChoice(player){
    const r = Math.random();
    if(r < 0.5){
      // ç¢ºç‡50%ï¼šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å‹ã¤æ‰‹
      for (const [me,winTo] of Object.entries(winMap)){
        if(winTo === player) return me;
      }
    }
    // æ®‹ã‚Š50%ã¯ãƒ©ãƒ³ãƒ€ãƒ 
    const arr = ['rock','scissors','paper'];
    return arr[Math.floor(Math.random()*3)];
  }

  handsEl.addEventListener('click', (e)=>{
    const btn = e.target.closest('.hand'); if(!btn) return;
    const you = btn.dataset.hand;
    const boss = bossChoice(you);
    bossHandEl.textContent = emojiMap[boss];

    const result =
      you === boss ? 'draw' :
      winMap[you] === boss ? 'you' : 'boss';

    if(result === 'you'){ score.you++; }
    else if(result === 'boss'){ score.boss++; }

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    if(result === 'draw'){
      hintEl.textContent = `ã‚ã„ã“ï¼ æ¬¡ã®æ‰‹ã‚’é¸ã‚“ã§ã­`;
    }else if(result === 'you'){
      hintEl.textContent = `ã‚ãªãŸã®å‹ã¡ï¼ æ¬¡ã®æ‰‹ã‚’é¸ã‚“ã§ã­`;
    }else{
      hintEl.textContent = `åº—é•·ã®å‹ã¡ï¼ æ¬¡ã®æ‰‹ã‚’é¸ã‚“ã§ã­`;
    }

    updateScore();
    checkFinish();
  });

  function updateScore(){
    scoreEl.textContent = `ã‚ãªãŸ ${score.you} - åº—é•· ${score.boss}`;
  }

  function checkFinish(){
    if(score.you >= 3 || score.boss >= 3){
      handsEl.style.display = 'none';
      restartRow.style.display = 'flex';
      resultCard.style.display = 'block';

      if(score.you >= 3){
        resultCard.innerHTML = `
          <strong>ğŸ‰ ã‚ãªãŸã®å‹ã¡ï¼</strong>
          <div class="utils">
            <span class="pill">åˆè¨€è‘‰ï¼šãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·</span>
            <button class="btn outline" id="copyKey">ã‚³ãƒ”ãƒ¼</button>
          </div>
          <div class="caption">LINEã®ãƒˆãƒ¼ã‚¯ã§ã“ã®åˆè¨€è‘‰ã‚’é€ã£ã¦ã­ï¼</div>`;
        $('#copyKey').addEventListener('click', ()=>{
          navigator.clipboard.writeText('ãƒœãƒªãƒ¥ãƒ¼ãƒŸãƒ¼åº—é•·');
          $('#copyKey').textContent = 'ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆï¼';
        });
      }else{
        resultCard.innerHTML = `<strong>ğŸ‘‘ åº—é•·ã®å‹ã¡ï¼</strong><div class="caption">ã¾ãŸæŒ‘æˆ¦ã—ã¦ã­ï¼</div>`;
      }
    }
  }

  $('#restartBtn').addEventListener('click', startGame);
</script>
</body>
</html>
